<!doctype html>
<html lang="en">
<head>
 	<title>Three.js 0001 - Orbital controls</title>
  	<meta charset="utf-8">
</head>
<body style="margin: 0;">
 
	<script src="/js/lib/three.js"></script>

	<script src="/js/lib/obj_loader.js"></script>

	<script src="/js/controls/orbit_controls.js"></script>

  	<script>
 
		var x = null;

	 	var app = function(){

			//define the vars 
			this.width;
			this.height;
			this.scene;
			this.camera;
			this.renderer;
			this.spotlight;
			this.controls;

			//setup function
			this.init = function() {
	 			
	 			//add window events
	 			this.events();

	    		// scene
	    		this.scene = new THREE.Scene();
	    		this.width = window.innerWidth;
	    		this.height = window.innerHeight;
	 
	    		//renderer
	    		this.renderer = new THREE.WebGLRenderer({antialias:true});
	    		this.renderer.setSize(this.width, this.height);
	    		document.body.appendChild(this.renderer.domElement);

	    		// camers - view
	    		this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 0.1, 1000);
				this.camera.position.y = 150;
				this.camera.position.z = 350;

				//controls
				this.controls = new THREE.OrbitControls( this.camera, this.renderer.domElement);

				// add subtle blue ambient lighting
				var ambientLight = new THREE.AmbientLight(0x000044);
				this.scene.add(ambientLight);

				//add a cube
				var cube = new THREE.Mesh( new THREE.BoxGeometry( 200, 200, 200 ), new THREE.MeshNormalMaterial() );
				cube.position.y = 0;
				this.scene.add( cube );

				//setup the annimation loop
				this.animate();
			};

			//window events
			this.events = function(){
				window.onresize = function(event) {
					x.width = window.innerWidth;	
					x.height = window.innerHeight;
					x.renderer.setSize(x.width, x.height);
					x.camera.aspect = x.width / x.height;
					x.camera.updateProjectionMatrix();

				};
			};

			//annimateion loop
			this.animate = function(){
				x.renderer.render( x.scene, x.camera );
	  			x.controls.update();
	  			requestAnimationFrame( x.animate );
			};
	 	}
	 	
	 	//create object and run
	 	x = new app();
	 	x.init();
	 	x.animate();
 
  	</script>
 
</body>
</html>